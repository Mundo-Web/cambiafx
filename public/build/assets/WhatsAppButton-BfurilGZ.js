import{j as s}from"./RequirementCard-DEdD30eg.js";import{r as h}from"./index-RYns6xqu.js";import{G as N}from"./Header-RQYzW6wl.js";import{m as v}from"./proxy-Dg7W2VMC.js";import{P as _}from"./phone-B_ERI8hO.js";const I=({children:d="Reserva una consulta",variant:m="primary",size:E="medium",showIcon:S=!0,className:f="",customMessage:i=null,customPhone:b=null,customLink:w=null,buttonData:c=null,customIcon:U=null,...R})=>{const[p,j]=h.useState({phone:null,message:null}),[W,k]=h.useState(!0),[n,B]=h.useState(null),y=e=>{try{const t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}},$=()=>w?{type:"link",value:w,isExternal:y(w)}:c?y(c)?{type:"link",value:c,isExternal:!0}:{type:"whatsapp",value:c}:i?y(i)?{type:"link",value:i,isExternal:!0}:{type:"whatsapp",value:i}:{type:"whatsapp",value:p.message};n!=null&&n.aboutus,n!=null&&n.generals,h.useEffect(()=>{(async()=>{var t,u;try{const o=new N;o.enableNotifications=!1;const r=await o.getAboutuses();if(r){const l=(t=r==null?void 0:r.generals)==null?void 0:t.find(x=>x.correlative==="whatsapp_phone"),a=(u=r==null?void 0:r.generals)==null?void 0:u.find(x=>x.correlative==="whatsapp_message");j({phone:(l==null?void 0:l.description)||null,message:(a==null?void 0:a.description)||"Hola, me gustaría reservar una consulta."})}}catch{j({phone:null,message:"Hola, me gustaría reservar una consulta."})}finally{k(!1)}})()},[]);const C=()=>{const e=$();if(e.type==="link"){const a=e.value.toLowerCase();a.includes("mailto:")||a.includes("tel:")?window.location.href=e.value:e.isExternal?window.open(e.value,"_blank"):window.location.href=e.value;return}const t=b||p.phone,u=e.value||p.message;if(!t)return;const o=t.replace(/[^\d+]/g,""),r=encodeURIComponent(u),l=`https://wa.me/${o}?text=${r}`;window.open(l,"_blank")},A=()=>{switch(m){case"constrast":return"bg-constrast text-white ";case"accent":return"bg-accent text-white ";case"secondary":return"bg-white text-primary border-2 border-primary hover:bg-primary hover:text-white";case"minimal":return"bg-transparent text-primary hover:bg-primary/10 border border-primary/30";default:return""}},g=()=>{switch(E){case"small":return"px-4 py-2 text-sm";case"large":return"px-8 py-4 text-lg";default:return""}};return W?s.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},className:`inline-flex items-center justify-center rounded-md ${g()} ${A()} ${f} opacity-70 cursor-not-allowed`,children:s.jsx(v.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"})}):!p.phone&&!b&&$().type==="whatsapp"?s.jsxs(v.div,{className:`inline-flex items-center justify-center rounded-md ${g()} bg-gray-300 text-gray-500 cursor-not-allowed ${f}`,children:[s.jsx(_,{className:"w-4 h-4 mr-2"}),"No disponible"]}):s.jsx("button",{onClick:C,className:`
                
                ${g()} 
                ${A()} 
                ${f}
            `,...R,children:d})},D=({children:d="Reserva una consulta",...m})=>s.jsx(I,{...m,children:d});export{I as W,D as a};

import{j as a}from"./RequirementCard-DEdD30eg.js";import{r as o}from"./index-RYns6xqu.js";import{G as N}from"./Header-RQYzW6wl.js";import{m as f}from"./proxy-Dg7W2VMC.js";import{P as R}from"./phone-B_ERI8hO.js";const C=({children:i="Reserva una consulta",variant:c="primary",size:b="medium",showIcon:E=!0,className:l="",customMessage:v=null,customPhone:x=null,...j})=>{const[p,w]=o.useState({phone:null,message:null}),[$,A]=o.useState(!0),[t,S]=o.useState(null);t!=null&&t.aboutus,t!=null&&t.generals,o.useEffect(()=>{(async()=>{var n,s;try{const r=new N;r.enableNotifications=!1;const e=await r.getAboutuses();if(e){const d=(n=e==null?void 0:e.generals)==null?void 0:n.find(g=>g.correlative==="whatsapp_phone"),h=(s=e==null?void 0:e.generals)==null?void 0:s.find(g=>g.correlative==="whatsapp_message");w({phone:(d==null?void 0:d.description)||null,message:(h==null?void 0:h.description)||"Hola, me gustaría reservar una consulta."})}}catch(r){console.error("Error fetching WhatsApp data:",r),w({phone:null,message:"Hola, me gustaría reservar una consulta."})}finally{A(!1)}})()},[]);const W=()=>{const m=x||p.phone,n=v||p.message;if(!m){console.warn("No se encontró número de WhatsApp configurado");return}const s=m.replace(/[^\d+]/g,""),r=encodeURIComponent(n),e=`https://wa.me/${s}?text=${r}`;window.open(e,"_blank")},y=()=>{switch(c){case"constrast":return"bg-constrast text-white ";case"accent":return"bg-accent text-white ";case"secondary":return"bg-white text-primary border-2 border-primary hover:bg-primary hover:text-white";case"minimal":return"bg-transparent text-primary hover:bg-primary/10 border border-primary/30";default:return""}},u=()=>{switch(b){case"small":return"px-4 py-2 text-sm";case"large":return"px-8 py-4 text-lg";default:return""}};return $?a.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},className:`inline-flex items-center justify-center rounded-md ${u()} ${y()} ${l} opacity-70 cursor-not-allowed`,children:a.jsx(f.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"})}):!p.phone&&!x?a.jsxs(f.div,{className:`inline-flex items-center justify-center rounded-md ${u()} bg-gray-300 text-gray-500 cursor-not-allowed ${l}`,children:[a.jsx(R,{className:"w-4 h-4 mr-2"}),"No disponible"]}):a.jsx("button",{onClick:W,className:`
                
                ${u()} 
                ${y()} 
                ${l}
            `,...j,children:i})},G=({children:i="Reserva una consulta",...c})=>a.jsx(C,{...c,children:i});export{C as W,G as a};

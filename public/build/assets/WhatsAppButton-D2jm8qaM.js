import{j as r}from"./RequirementCard-DEdD30eg.js";import{r as o}from"./index-RYns6xqu.js";import{G as C}from"./Header-RQYzW6wl.js";import{m as w}from"./proxy-Dg7W2VMC.js";import{P as N}from"./phone-B_ERI8hO.js";const S=({children:i="Reserva una consulta",variant:l="primary",size:v="medium",showIcon:_=!0,className:c="",customMessage:j=null,customPhone:x=null,customLink:p=null,...$})=>{const[u,y]=o.useState({phone:null,message:null}),[A,W]=o.useState(!0),[t,E]=o.useState(null);t!=null&&t.aboutus,t!=null&&t.generals,o.useEffect(()=>{(async()=>{var n,s;try{const a=new C;a.enableNotifications=!1;const e=await a.getAboutuses();if(e){const h=(n=e==null?void 0:e.generals)==null?void 0:n.find(f=>f.correlative==="whatsapp_phone"),g=(s=e==null?void 0:e.generals)==null?void 0:s.find(f=>f.correlative==="whatsapp_message");y({phone:(h==null?void 0:h.description)||null,message:(g==null?void 0:g.description)||"Hola, me gustaría reservar una consulta."})}}catch{y({phone:null,message:"Hola, me gustaría reservar una consulta."})}finally{W(!1)}})()},[]);const R=()=>{if(p){window.open(p,"_blank");return}const d=x||u.phone,n=j||u.message;if(!d)return;const s=d.replace(/[^\d+]/g,""),a=encodeURIComponent(n),e=`https://wa.me/${s}?text=${a}`;window.open(e,"_blank")},b=()=>{switch(l){case"constrast":return"bg-constrast text-white ";case"accent":return"bg-accent text-white ";case"secondary":return"bg-white text-primary border-2 border-primary hover:bg-primary hover:text-white";case"minimal":return"bg-transparent text-primary hover:bg-primary/10 border border-primary/30";default:return""}},m=()=>{switch(v){case"small":return"px-4 py-2 text-sm";case"large":return"px-8 py-4 text-lg";default:return""}};return A?r.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:`inline-flex items-center justify-center rounded-md ${m()} ${b()} ${c} opacity-70 cursor-not-allowed`,children:r.jsx(w.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"})}):!u.phone&&!x&&!p?r.jsxs(w.div,{className:`inline-flex items-center justify-center rounded-md ${m()} bg-gray-300 text-gray-500 cursor-not-allowed ${c}`,children:[r.jsx(N,{className:"w-4 h-4 mr-2"}),"No disponible"]}):r.jsx("button",{onClick:R,className:`
                
                ${m()} 
                ${b()} 
                ${c}
            `,...$,children:i})},H=({children:i="Reserva una consulta",...l})=>r.jsx(S,{...l,children:i});export{S as W,H as a};

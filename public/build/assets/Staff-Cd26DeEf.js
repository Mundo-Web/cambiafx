var g=Object.defineProperty;var j=(i,s,o)=>s in i?g(i,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[s]=o;var m=(i,s,o)=>(j(i,typeof s!="symbol"?s+"":s,o),o);import{j as r}from"./RequirementCard-CpM0iYLI.js";import{r as n}from"./index-B80Lgev0.js";import{B as w}from"./Base-DcIXo8_n.js";import{c as S}from"./ReactAppend-CBRQCQGz.js";import{r as D}from"./DxBox-CdMuSyGE.js";import{S as B}from"./sweetalert2.all-Dh0rZL5X.js";import{M as C}from"./Modal-DJyFGvYY.js";import{T as I}from"./Table-C3CodGPR.js";import{I as E}from"./InputFormGroup-C5uNEzQG.js";import{D as x}from"./DxButton-CsjWvhyj.js";import{C as N}from"./CreateReactScript-Bj11ghWz.js";import{B as F}from"./Results-DFOKnyj8.js";import"./tippy-react.esm-CHhA99mn.js";import"./index-DO3Aws4m.js";/* empty css              */import"./Logout-Cj6nvmS-.js";import"./main-Br9xqDfn.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";import"./index.esm-CTa_PdWD.js";import"./axios-B4uVmeYG.js";import"./useTranslation-eU9E4S-_.js";import"./Filter-DhMUjbr-.js";/* empty css               */class T extends F{constructor(){super(...arguments);m(this,"path","admin/staff");m(this,"hasFiles",!0)}}const u=new T,y=()=>{const i=n.useRef(),s=n.useRef(),o=n.useRef(),c=n.useRef();n.useRef();const l=n.useRef();n.useRef();const[k,a]=n.useState([{value:""}]),[G,f]=n.useState([{value:""}]),[p,h]=n.useState(!1),d=e=>{h(!!(e!=null&&e.id)),o.current.value=(e==null?void 0:e.id)||"",c.current.value=(e==null?void 0:e.name)||"",l.current.value=(e==null?void 0:e.description)||"",e!=null&&e.characteristics&&e.characteristics.length>0?a(e.characteristics.map(t=>({value:t}))):a([{value:""}]),e!=null&&e.socials&&e.socials.length>0?f(e.socials.map(t=>({value:t}))):f([{value:""}]),$(s.current).modal("show")},v=async e=>{e.preventDefault();const t=new FormData;t.append("name",c.current.value),t.append("description",l.current.value),p&&t.append("id",o.current.value),await u.save(t)&&($(i.current).dxDataGrid("instance").refresh(),$(s.current).modal("hide"),setGallery([]),a([{value:""}]))},R=async e=>{const{isConfirmed:t}=await B.fire({title:"Eliminar Issues",text:"¿Estás seguro de eliminar este problema?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!t||!await u.delete(e)||$(i.current).dxDataGrid("instance").refresh()};return r.jsxs(r.Fragment,{children:[r.jsx(I,{gridRef:i,title:"Issues",rest:u,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(i.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar nuevo Issues",onClick:()=>d()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Problema",width:"200px"},{dataField:"description",caption:"Descripción",cellTemplate:(e,{data:t})=>{e.html(D(r.jsx("div",{className:"text-truncate",style:{maxWidth:"300px"},children:t.description})))}},{caption:"Acciones",width:"100px",cellTemplate:(e,{data:t})=>{e.append(x({className:"btn btn-xs btn-soft-primary me-1",title:"Editar",icon:"fa fa-pen",onClick:()=>d(t)})),e.append(x({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>R(t.id)}))}}]}),r.jsxs(C,{modalRef:s,title:p?"Editar Issues":"Nuevo Issues",onSubmit:v,size:"sm",children:[r.jsx("input",{ref:o,type:"hidden"}),r.jsx("div",{className:"row",children:r.jsxs("div",{className:"col-md-12",children:[r.jsx(E,{eRef:c,label:"Problema",required:!0}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"form-label",children:"Descripción"}),r.jsx("textarea",{ref:l,className:"form-control",rows:4,required:!0})]})]})})]})]})};N((i,s)=>{S(i).render(r.jsx(w,{...s,title:"Issues",children:r.jsx(y,{...s})}))});
